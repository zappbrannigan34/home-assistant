# ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
#  –ê–í–¢–û–ú–ê–¢–ò–ó–ê–¶–ò–Ø –£–ü–†–ê–í–õ–ï–ù–ò–Ø –£–í–õ–ê–ñ–ù–ò–¢–ï–õ–ï–ú POLARIS PUH-9105
#
#  Version: 1.1.1
#  Last Updated: 2025-01-22
# ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
#
#  üß™ –ù–ê–£–ß–ù–û –û–ë–û–°–ù–û–í–ê–ù–ù–ê–Ø –°–ò–°–¢–ï–ú–ê –£–ü–†–ê–í–õ–ï–ù–ò–Ø –í–õ–ê–ñ–ù–û–°–¢–¨–Æ
#
#  –ú–µ—Ç–æ–¥–æ–ª–æ–≥–∏—è:
#    ‚úì Hybrid Control: Zoned (kvazis) + Incremental (Stack Overflow)
#    ‚úì Adaptive Humidity: –¥–≤–æ–π–Ω–∞—è –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç—å (–∫–æ–º–Ω–∞—Ç–Ω–∞—è + —É–ª–∏—á–Ω–∞—è —Ç–µ–º–ø–µ—Ä–∞—Ç—É—Ä–∞)
#    ‚úì 8 —É—Ä–æ–≤–Ω–µ–π –∏–Ω—Ç–µ–Ω—Å–∏–≤–Ω–æ—Å—Ç–∏ (0-7) —Å –ø–ª–∞–≤–Ω—ã–º–∏ –ø–µ—Ä–µ—Ö–æ–¥–∞–º–∏
#
#  –ù–∞—É—á–Ω–∞—è –±–∞–∑–∞:
#    ‚Ä¢ –í–û–ó/WHO: 40-60% –¥–ª—è –∑–¥–æ—Ä–æ–≤—å—è –∏ –º–∏–Ω–∏–º–∏–∑–∞—Ü–∏–∏ –≤–∏—Ä—É—Å–æ–≤/–±–∞–∫—Ç–µ—Ä–∏–π
#    ‚Ä¢ ASHRAE Standard 55-2023: —Ç–µ–ø–ª–æ–≤–æ–π –∫–æ–º—Ñ–æ—Ä—Ç –∏ —Ç–æ—á–∫–∞ —Ä–æ—Å—ã ‚â§16.8¬∞C
#    ‚Ä¢ ISO 7730 (–ì–û–°–¢ –† –ò–°–û 7730-2009): –∏–Ω–¥–µ–∫—Å PMV/PPD –§–∞–Ω–≥–µ—Ä–∞
#    ‚Ä¢ –ì–û–°–¢ 30494-2011: 30-45% –æ–ø—Ç–∏–º—É–º –ø—Ä–∏ 20-22¬∞C
#
#  –§–æ—Ä–º—É–ª—ã:
#    1. –û—Ç –∫–æ–º–Ω–∞—Ç–Ω–æ–π T: base = 75 - (1.25 √ó T_room) [ISO 7730]
#    2. –û—Ç —É–ª–∏—á–Ω–æ–π T: limit = 50 - max(0, 10 - T_outdoor) [ASHRAE]
#    3. –§–∏–Ω–∞–ª—å–Ω–∞—è: target = min(base, limit, 60) [–í–û–ó –º–∞–∫—Å–∏–º—É–º]
#
# ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê

# ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
#  INPUT HELPERS
# ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ

input_boolean:
  # –í–∫–ª—é—á–µ–Ω–∏–µ/–≤—ã–∫–ª—é—á–µ–Ω–∏–µ –∞–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü–∏–∏
  humidity_auto_enabled:
    name: "–ê–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü–∏—è –≤–ª–∞–∂–Ω–æ—Å—Ç–∏"
    initial: true
    icon: mdi:robot

# ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
#  TEMPLATE SENSORS
# ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ

template:
  - sensor:
      # ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ
      #  –ê–î–ê–ü–¢–ò–í–ù–ê–Ø –¶–ï–õ–ï–í–ê–Ø –í–õ–ê–ñ–ù–û–°–¢–¨ (–¥–≤–æ–π–Ω–∞—è –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç—å)
      # ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ
      - name: "Adaptive Target Humidity"
        unit_of_measurement: "%"
        state_class: measurement
        icon: mdi:water-thermometer-outline
        state: >
            {# –¢–µ–º–ø–µ—Ä–∞—Ç—É—Ä–∞ –≤ –∫–æ–º–Ω–∞—Ç–µ (–æ—Ç –¥–∞—Ç—á–∏–∫–∞ sensor-zap) #}
            {% set T_room = states('sensor.sensor_zap_temperature') | float(22) %}

            {# –¢–µ–º–ø–µ—Ä–∞—Ç—É—Ä–∞ –Ω–∞ —É–ª–∏—Ü–µ (Met.no weather integration) #}
            {% set T_outdoor = state_attr('weather.forecast_home_assistant', 'temperature') | float(0) %}

            {# ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê #}
            {# –§–û–†–ú–£–õ–ê 1: –ë–∞–∑–æ–≤–∞—è —Ü–µ–ª—å –æ—Ç –ö–û–ú–ù–ê–¢–ù–û–ô —Ç–µ–º–ø–µ—Ä–∞—Ç—É—Ä—ã              #}
            {# –ò—Å—Ç–æ—á–Ω–∏–∫: ISO 7730 (—Ç–µ–ø–ª–æ–≤–æ–π –∫–æ–º—Ñ–æ—Ä—Ç –§–∞–Ω–≥–µ—Ä–∞)                 #}
            {# –õ–æ–≥–∏–∫–∞: –ø—Ä–∏ T‚Üë ‚Üí RH‚Üì (–≤—ã—Å–æ–∫–∞—è –≤–ª–∞–∂–Ω–æ—Å—Ç—å + –∂–∞—Ä–∞ = –¥—É—Ö–æ—Ç–∞)     #}
            {# ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê #}
            {% set base_indoor = 75 - (1.25 * T_room) %}

            {# –ü—Ä–∏–º–µ—Ä—ã:                                                        #}
            {# T_room=18¬∞C ‚Üí 75-22.5 = 52.5%                                  #}
            {# T_room=20¬∞C ‚Üí 75-25.0 = 50.0%                                  #}
            {# T_room=22¬∞C ‚Üí 75-27.5 = 47.5%                                  #}
            {# T_room=24¬∞C ‚Üí 75-30.0 = 45.0%                                  #}
            {# T_room=26¬∞C ‚Üí 75-32.5 = 42.5%                                  #}

            {# ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê #}
            {# –§–û–†–ú–£–õ–ê 2: –û–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–µ –æ—Ç –£–õ–ò–ß–ù–û–ô —Ç–µ–º–ø–µ—Ä–∞—Ç—É—Ä—ã                 #}
            {# –ò—Å—Ç–æ—á–Ω–∏–∫: ASHRAE/Aprilaire guidelines                          #}
            {# –õ–æ–≥–∏–∫–∞: —Ö–æ–ª–æ–¥–Ω—ã–π –≤–æ–∑–¥—É—Ö –ø—Ä–∏ –Ω–∞–≥—Ä–µ–≤–µ —Ç–µ—Ä—è–µ—Ç RH ‚Üí –Ω—É–∂–Ω–æ –º–µ–Ω—å—à–µ  #}
            {#         —É–≤–ª–∞–∂–Ω–µ–Ω–∏–µ, –∏–Ω–∞—á–µ –∫–æ–Ω–¥–µ–Ω—Å–∞—Ç –Ω–∞ —Ö–æ–ª–æ–¥–Ω—ã—Ö –ø–æ–≤–µ—Ä—Ö–Ω–æ—Å—Ç—è—Ö  #}
            {# ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê #}
            {% set outdoor_limit = 50 - [0, 10 - T_outdoor] | max %}

            {# –ü—Ä–∏–º–µ—Ä—ã (ASHRAE —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏):                                 #}
            {# T_outdoor > +10¬∞C  ‚Üí 50 - 0   = 50%                            #}
            {# T_outdoor = +5¬∞C   ‚Üí 50 - 5   = 45%                            #}
            {# T_outdoor = 0¬∞C    ‚Üí 50 - 10  = 40%                            #}
            {# T_outdoor = -10¬∞C  ‚Üí 50 - 20  = 30%                            #}
            {# T_outdoor = -20¬∞C  ‚Üí 50 - 30  = 20%                            #}
            {# T_outdoor = -30¬∞C  ‚Üí 50 - 40  = 10% (–Ω–æ –º–∏–Ω. 15% –æ—Ç –í–û–ó)      #}

            {# ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê #}
            {# –§–ò–ù–ê–õ–¨–ù–´–ô –†–ê–°–ß–ï–¢: –±–µ—Ä—ë–º –º–∏–Ω–∏–º—É–º –∏–∑ –≤—Å–µ—Ö –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–π            #}
            {# + –º–µ–¥–∏—Ü–∏–Ω—Å–∫–∏–µ –≥—Ä–∞–Ω–∏—Ü—ã –æ—Ç –í–û–ó: 40-60%                           #}
            {# ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê #}
            {% set target = [base_indoor, outdoor_limit, 60] | min | float %}
            {% set target = [target, 40] | max %}  {# –ú–∏–Ω–∏–º—É–º 40% (–í–û–ó) #}

            {{ target | round(1) }}

      # ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ
      #  –¢–ï–ö–£–©–ï–ï –û–¢–ö–õ–û–ù–ï–ù–ò–ï (–æ—à–∏–±–∫–∞ —Ä–µ–≥—É–ª–∏—Ä–æ–≤–∞–Ω–∏—è)
      # ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ
      - name: "Humidity Error"
        unit_of_measurement: "%"
        state_class: measurement
        icon: mdi:delta
        state: >
            {% set target = states('sensor.adaptive_target_humidity') | float(45) %}
            {% set current = states('sensor.sensor_zap_humidity') | float(50) %}
            {{ (target - current) | round(1) }}

      # ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ
      #  –†–ï–ö–û–ú–ï–ù–î–£–ï–ú–ê–Ø –ò–ù–¢–ï–ù–°–ò–í–ù–û–°–¢–¨ (HYBRID –º–µ—Ç–æ–¥)
      # ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ
      - name: "Recommended Intensity"
        icon: mdi:gauge
        state: >
            {% set error = states('sensor.humidity_error') | float(0) %}
            {% set current_intensity = states('number.humidifier_puh_9105_puh_2709_intensity') | int(0) %}

            {# ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê #}
            {# HYBRID CONTROL LOGIC                                            #}
            {# ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê #}

            {# ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ #}
            {# –†–ï–ñ–ò–ú 1: ZONED CONTROL (–¥–ª—è –±–æ–ª—å—à–∏—Ö –æ—Ç–∫–ª–æ–Ω–µ–Ω–∏–π)                #}
            {# –ò—Å—Ç–æ—á–Ω–∏–∫: kvazis living_humidity.yaml                           #}
            {# –õ–æ–≥–∏–∫–∞: –±—ã—Å—Ç—Ä–∞—è —Ä–µ–∞–∫—Ü–∏—è –Ω–∞ –∑–Ω–∞—á–∏—Ç–µ–ª—å–Ω—ã–µ –æ—Ç–∫–ª–æ–Ω–µ–Ω–∏—è             #}
            {# ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ #}
            {% if error > 10 %}
              {# –ö—Ä–∏—Ç–∏—á–µ—Å–∫–∏ –Ω–∏–∑–∫–∞—è –≤–ª–∞–∂–Ω–æ—Å—Ç—å ‚Üí –º–∞–∫—Å–∏–º–∞–ª—å–Ω–∞—è –º–æ—â–Ω–æ—Å—Ç—å #}
              7
            {% elif error > 5 %}
              {# –ù–∏–∑–∫–∞—è –≤–ª–∞–∂–Ω–æ—Å—Ç—å ‚Üí –≤—ã—Å–æ–∫–∞—è –º–æ—â–Ω–æ—Å—Ç—å #}
              5
            {% elif error > 2 %}
              {# –£–º–µ—Ä–µ–Ω–Ω–æ –Ω–∏–∑–∫–∞—è ‚Üí —Å—Ä–µ–¥–Ω—è—è –º–æ—â–Ω–æ—Å—Ç—å #}
              3

            {# ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ #}
            {# –†–ï–ñ–ò–ú 2: INCREMENTAL CONTROL (–≤–±–ª–∏–∑–∏ —Ü–µ–ª–∏)                     #}
            {# –ò—Å—Ç–æ—á–Ω–∏–∫: Stack Overflow incremental method                     #}
            {# –õ–æ–≥–∏–∫–∞: –ø–ª–∞–≤–Ω—ã–π –ø–æ–¥—Ö–æ–¥ –∫ —Ü–µ–ª–∏, –ø—Ä–µ–¥–æ—Ç–≤—Ä–∞—â–µ–Ω–∏–µ overshoot        #}
            {# ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ #}
            {% elif error > 0.5 %}
              {# –ß—É—Ç—å –Ω–∏–∂–µ —Ü–µ–ª–∏ ‚Üí —É–≤–µ–ª–∏—á–∏—Ç—å –Ω–∞ 1 (–º–∞–∫—Å 7) #}
              {{ [current_intensity + 1, 7] | min }}
            {% elif error < -2 %}
              {# –ü—Ä–µ–≤—ã—à–µ–Ω–∏–µ ‚Üí —Å–Ω–∏–∑–∏—Ç—å –Ω–∞ 1 (–º–∏–Ω 0) #}
              {{ [current_intensity - 1, 0] | max }}
            {% else %}
              {# –í –ø—Ä–µ–¥–µ–ª–∞—Ö —Ü–µ–ª–µ–≤–æ–≥–æ –¥–∏–∞–ø–∞–∑–æ–Ω–∞ ‚Üí –Ω–µ –º–µ–Ω—è—Ç—å #}
              {{ current_intensity }}
            {% endif %}

# ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
#  AUTOMATIONS
# ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ

automation:
  # ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
  #  –ò–ù–ò–¶–ò–ê–õ–ò–ó–ê–¶–ò–Ø –£–°–¢–†–û–ô–°–¢–í–ê
  # ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
  - id: "–ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è —É–≤–ª–∞–∂–Ω–∏—Ç–µ–ª—è"
    alias: humidity_device_setup
    description: "–í–∫–ª—é—á–µ–Ω–∏–µ –∏ –Ω–∞—Å—Ç—Ä–æ–π–∫–∞ –≤—Å–µ—Ö –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤ —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞"
    mode: single
    max_exceeded: silent

    trigger:
      # –ü—Ä–∏ –≤–∫–ª—é—á–µ–Ω–∏–∏ –∞–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü–∏–∏
      - platform: state
        entity_id: input_boolean.humidity_auto_enabled
        to: "on"
      # –ü—Ä–∏ –≤—ã–∫–ª—é—á–µ–Ω–∏–∏ –ø–∏—Ç–∞–Ω–∏—è —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞
      - platform: state
        entity_id: switch.humidifier_puh_9105_puh_2709_power
        to: "off"
        for:
          seconds: 5

    condition:
      - condition: state
        entity_id: input_boolean.humidity_auto_enabled
        state: "on"

    action:
      # –®–∞–≥ 1: –í–∫–ª—é—á–∏—Ç—å –ø–∏—Ç–∞–Ω–∏–µ
      - service: switch.turn_on
        target:
          entity_id: switch.humidifier_puh_9105_puh_2709_power

      # –®–∞–≥ 2: –ü–æ–¥–æ–∂–¥–∞—Ç—å –∑–∞–≥—Ä—É–∑–∫–∏ —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞
      - delay:
          seconds: 2

      # –®–∞–≥ 3: –£—Å—Ç–∞–Ω–æ–≤–∏—Ç—å —Ä–µ–∂–∏–º "home" (manual control)
      - service: humidifier.set_mode
        target:
          entity_id: humidifier.humidifier_puh_9105_puh_2709_humidifier
        data:
          mode: "home"

      # –®–∞–≥ 4: –ù–∞—Å—Ç—Ä–æ–∏—Ç—å switches
      # –û—Ç–∫–ª—é—á–∏—Ç—å –∑–≤—É–∫ (–ø–∏—â–∞–ª–∫—É)
      - service: switch.turn_off
        target:
          entity_id: switch.humidifier_puh_9105_puh_2709_sound

      # –í–∫–ª—é—á–∏—Ç—å –±–ª–æ–∫–∏—Ä–æ–≤–∫—É
      - service: switch.turn_on
        target:
          entity_id: switch.humidifier_puh_9105_puh_2709_child_lock

      # –í–∫–ª—é—á–∏—Ç—å –∏–æ–Ω–∏–∑–∞—Ü–∏—é
      - service: switch.turn_on
        target:
          entity_id: switch.humidifier_puh_9105_puh_2709_ioniser

      # –í–∫–ª—é—á–∏—Ç—å –ø–æ–¥–æ–≥—Ä–µ–≤ (—Ç–µ–ø–ª—ã–π –ø–∞—Ä)
      - service: switch.turn_on
        target:
          entity_id: switch.humidifier_puh_9105_puh_2709_warm_stream

      # –í—ã–∫–ª—é—á–∏—Ç—å –ø–æ–¥—Å–≤–µ—Ç–∫—É
      - service: switch.turn_off
        target:
          entity_id: switch.humidifier_puh_9105_puh_2709_backlight

  # ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
  #  –û–°–ù–û–í–ù–ê–Ø –ê–í–¢–û–ú–ê–¢–ò–ó–ê–¶–ò–Ø –£–ü–†–ê–í–õ–ï–ù–ò–Ø
  # ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
  - id: "–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∏–Ω—Ç–µ–Ω—Å–∏–≤–Ω–æ—Å—Ç—å—é —É–≤–ª–∞–∂–Ω–∏—Ç–µ–ª—è"
    alias: humidity_control_main
    description: "Hybrid adaptive control: –∫–æ–º–Ω–∞—Ç–Ω–∞—è + —É–ª–∏—á–Ω–∞—è —Ç–µ–º–ø–µ—Ä–∞—Ç—É—Ä–∞"
    mode: single
    max_exceeded: silent

    trigger:
      # –ü–µ—Ä–∏–æ–¥–∏—á–µ—Å–∫–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞ –∫–∞–∂–¥—ã–µ 5 –º–∏–Ω—É—Ç
      - platform: time_pattern
        minutes: "/5"
      # –ü—Ä–∏ –∏–∑–º–µ–Ω–µ–Ω–∏–∏ —Ç–µ–∫—É—â–µ–π –≤–ª–∞–∂–Ω–æ—Å—Ç–∏
      - platform: state
        entity_id: sensor.sensor_zap_humidity
      # –ü—Ä–∏ –∏–∑–º–µ–Ω–µ–Ω–∏–∏ –∫–æ–º–Ω–∞—Ç–Ω–æ–π —Ç–µ–º–ø–µ—Ä–∞—Ç—É—Ä—ã
      - platform: state
        entity_id: sensor.sensor_zap_temperature
      # –ü—Ä–∏ –∏–∑–º–µ–Ω–µ–Ω–∏–∏ —É–ª–∏—á–Ω–æ–π —Ç–µ–º–ø–µ—Ä–∞—Ç—É—Ä—ã
      - platform: state
        entity_id: weather.forecast_home_assistant
        attribute: temperature

    condition:
      # –ê–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü–∏—è –¥–æ–ª–∂–Ω–∞ –±—ã—Ç—å –≤–∫–ª—é—á–µ–Ω–∞
      - condition: state
        entity_id: input_boolean.humidity_auto_enabled
        state: "on"
      # –£—Å—Ç—Ä–æ–π—Å—Ç–≤–æ –±–µ–∑ –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏—Ö –æ—à–∏–±–æ–∫
      - condition: template
        value_template: >
          {% set err = states('sensor.humidifier_puh_9105_puh_2709_error') %}
          {{ err in ['00', 'no_error', '02', 'child_lock', '', 'unknown', 'unavailable'] }}

    action:
      - variables:
          recommended: "{{ states('sensor.recommended_intensity') | int(0) }}"
          current: "{{ states('number.humidifier_puh_9105_puh_2709_intensity') | int(0) }}"

      # ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
      # –ü–†–û–í–ï–†–ö–ê –ì–û–¢–û–í–ù–û–°–¢–ò –£–°–¢–†–û–ô–°–¢–í–ê
      # ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
      # –ï—Å–ª–∏ —É—Å—Ç—Ä–æ–π—Å—Ç–≤–æ –ù–ï –≥–æ—Ç–æ–≤–æ ‚Üí –æ—Å—Ç–∞–Ω–æ–≤–∏—Ç—å—Å—è –∏ –∂–¥–∞—Ç—å device_setup automation
      - choose:
          # –ï—Å–ª–∏ power OFF –∏–ª–∏ —Ä–µ–∂–∏–º –Ω–µ–ø—Ä–∞–≤–∏–ª—å–Ω—ã–π ‚Üí –æ—Å—Ç–∞–Ω–æ–≤–∏—Ç—å—Å—è
          - conditions:
              - condition: or
                conditions:
                  - condition: state
                    entity_id: switch.humidifier_puh_9105_puh_2709_power
                    state: "off"
                  - condition: template
                    value_template: >
                      {{ state_attr('humidifier.humidifier_puh_9105_puh_2709_humidifier', 'mode') != 'home' }}
            sequence:
              - stop: "–£—Å—Ç—Ä–æ–π—Å—Ç–≤–æ –Ω–µ –≥–æ—Ç–æ–≤–æ, –∂–¥—ë–º device_setup automation"

          # –ï—Å–ª–∏ –±–∞–∫ —Å–Ω—è—Ç/–ø—É—Å—Ç ‚Üí —Ç–æ–ª—å–∫–æ –æ—Å—Ç–∞–Ω–æ–≤–∏—Ç—å—Å—è (—É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ –æ—Ç–ø—Ä–∞–≤–∏—Ç water_empty)
          - conditions:
              - condition: state
                entity_id: binary_sensor.humidifier_puh_9105_puh_2709_water_tank
                state: "on"
            sequence:
              - stop: "–ù–µ—Ç –≤–æ–¥—ã –≤ –±–∞–∫–µ"

      # ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
      # –£–ü–†–ê–í–õ–ï–ù–ò–ï –ò–ù–¢–ï–ù–°–ò–í–ù–û–°–¢–¨–Æ (–µ—Å–ª–∏ —É—Å—Ç—Ä–æ–π—Å—Ç–≤–æ –≥–æ—Ç–æ–≤–æ)
      # ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
      # –£—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º —Ç–æ–ª—å–∫–æ –µ—Å–ª–∏ –∏–∑–º–µ–Ω–∏–ª–∞—Å—å
      - condition: template
        value_template: "{{ recommended != current }}"

      - service: number.set_value
        target:
          entity_id: number.humidifier_puh_9105_puh_2709_intensity
        data:
          value: "{{ recommended }}"

  # ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
  #  –î–ï–¢–ï–ö–¢–û–† –†–£–ß–ù–û–ì–û –£–ü–†–ê–í–õ–ï–ù–ò–Ø
  # ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
  - id: "–î–µ—Ç–µ–∫—Ç–æ—Ä —Ä—É—á–Ω–æ–≥–æ —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è —É–≤–ª–∞–∂–Ω–∏—Ç–µ–ª–µ–º"
    alias: humidity_manual_control_detector
    description: "–û—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ—Ç –∞–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü–∏—é –ø—Ä–∏ –∏–∑–º–µ–Ω–µ–Ω–∏–∏ –ù–ï –æ—Ç –Ω–µ—ë"
    mode: restart

    trigger:
      # –†—É—á–Ω–æ–µ –∏–∑–º–µ–Ω–µ–Ω–∏–µ –∏–Ω—Ç–µ–Ω—Å–∏–≤–Ω–æ—Å—Ç–∏
      - platform: state
        entity_id: number.humidifier_puh_9105_puh_2709_intensity
        for:
          seconds: 2

    condition:
      # –ò–≥–Ω–æ—Ä–∏—Ä–æ–≤–∞—Ç—å –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—é entity (unavailable/unknown ‚Üí —á–∏—Å–ª–æ)
      - condition: template
        value_template: >
          {{ trigger.from_state.state not in ['unavailable', 'unknown', 'none'] }}
      # –ù–ï —Å—Ä–∞–±–∞—Ç—ã–≤–∞—Ç—å –µ—Å–ª–∏ device_setup –∏–ª–∏ control_main —Ä–∞–±–æ—Ç–∞—é—Ç –°–ï–ô–ß–ê–°
      - condition: template
        value_template: >
          {{ state_attr('automation.humidity_device_setup', 'current') | int(0) == 0 and
             state_attr('automation.humidity_control_main', 'current') | int(0) == 0 }}

    action:
      # –í—ã–∫–ª—é—á–∏—Ç—å –∞–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü–∏—é
      - service: input_boolean.turn_off
        target:
          entity_id: input_boolean.humidity_auto_enabled

  # ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
  #  –£–í–ï–î–û–ú–õ–ï–ù–ò–ï: –û–®–ò–ë–ö–ê –£–°–¢–†–û–ô–°–¢–í–ê
  # ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
  - id: "–û—à–∏–±–∫–∞ —É–≤–ª–∞–∂–Ω–∏—Ç–µ–ª—è"
    alias: humidity_device_error
    description: "–£–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ –ø—Ä–∏ –≤–æ–∑–Ω–∏–∫–Ω–æ–≤–µ–Ω–∏–∏ –æ—à–∏–±–∫–∏ —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞"
    mode: single

    trigger:
      # –ü—Ä–∏ –∏–∑–º–µ–Ω–µ–Ω–∏–∏ error sensor
      - platform: state
        entity_id: sensor.humidifier_puh_9105_puh_2709_error

    condition:
      # –¢–æ–ª—å–∫–æ –µ—Å–ª–∏ –µ—Å—Ç—å –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∞—è –æ—à–∏–±–∫–∞ (–Ω–µ 00, –Ω–µ 02)
      - condition: template
        value_template: >
          {% set err = trigger.to_state.state %}
          {{ err not in ['00', 'no_error', '02', 'child_lock', '', 'unknown', 'unavailable'] }}

    action:
      - variables:
          error_code: "{{ states('sensor.humidifier_puh_9105_puh_2709_error') }}"
          error_title: >
            {% if error_code == '01' or error_code == 'low_water' %}
              üíß –ú–∞–ª–æ –≤–æ–¥—ã –≤ —É–≤–ª–∞–∂–Ω–∏—Ç–µ–ª–µ
            {% elif error_code == '03' or error_code == 'replace_filter' %}
              üîß –ó–∞–º–µ–Ω–∏—Ç–µ —Ñ–∏–ª—å—Ç—Ä —É–≤–ª–∞–∂–Ω–∏—Ç–µ–ª—è
            {% elif error_code == '04' or error_code == 'maximum_schedules' %}
              ‚ö†Ô∏è –ü—Ä–µ–≤—ã—à–µ–Ω–æ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ —Ä–∞—Å–ø–∏—Å–∞–Ω–∏–π
            {% elif error_code == '05' or error_code == 'clean_tank' %}
              üßº –û—á–∏—Å—Ç–∏—Ç–µ –±–∞–∫ —É–≤–ª–∞–∂–Ω–∏—Ç–µ–ª—è
            {% else %}
              ‚ö†Ô∏è –û—à–∏–±–∫–∞ —É–≤–ª–∞–∂–Ω–∏—Ç–µ–ª—è
            {% endif %}
          error_message: >
            {% if error_code == '01' or error_code == 'low_water' %}
              –£—Ä–æ–≤–µ–Ω—å –≤–æ–¥—ã —Å–ª–∏—à–∫–æ–º –Ω–∏–∑–∫–∏–π.
              –ù–∞–ø–æ–ª–Ω–∏—Ç–µ –±–∞–∫ —á–∏—Å—Ç–æ–π –≤–æ–¥–æ–π.
            {% elif error_code == '03' or error_code == 'replace_filter' %}
              –§–∏–ª—å—Ç—Ä –∑–∞–≥—Ä—è–∑–Ω—ë–Ω –∏ —Ç—Ä–µ–±—É–µ—Ç –∑–∞–º–µ–Ω—ã.
              –£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ –Ω–æ–≤—ã–π —Ñ–∏–ª—å—Ç—Ä –¥–ª—è –ø—Ä–æ–¥–æ–ª–∂–µ–Ω–∏—è —Ä–∞–±–æ—Ç—ã.

              –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ø—Ä–∏–æ—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–æ –¥–æ –∑–∞–º–µ–Ω—ã —Ñ–∏–ª—å—Ç—Ä–∞.
            {% elif error_code == '04' or error_code == 'maximum_schedules' %}
              –î–æ—Å—Ç–∏–≥–Ω—É—Ç–æ –º–∞–∫—Å–∏–º–∞–ª—å–Ω–æ–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –Ω–∞—Å—Ç—Ä–æ–µ–Ω–Ω—ã—Ö —Ä–∞—Å–ø–∏—Å–∞–Ω–∏–π.
              –£–¥–∞–ª–∏—Ç–µ –Ω–µ–∏—Å–ø–æ–ª—å–∑—É–µ–º—ã–µ —Ä–∞—Å–ø–∏—Å–∞–Ω–∏—è —á–µ—Ä–µ–∑ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ.
            {% elif error_code == '05' or error_code == 'clean_tank' %}
              –ë–∞–∫ —Ç—Ä–µ–±—É–µ—Ç –æ—á–∏—Å—Ç–∫–∏ –æ—Ç –Ω–∞–∫–∏–ø–∏ –∏ –±–∞–∫—Ç–µ—Ä–∏–π.
              –í—ã–ø–æ–ª–Ω–∏—Ç–µ –æ—á–∏—Å—Ç–∫—É —Å–æ–≥–ª–∞—Å–Ω–æ –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏.

              –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ø—Ä–∏–æ—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–æ –¥–æ –æ—á–∏—Å—Ç–∫–∏ –±–∞–∫–∞.
            {% else %}
              –ö–æ–¥ –æ—à–∏–±–∫–∏: {{ error_code }}
              –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —É—Å—Ç—Ä–æ–π—Å—Ç–≤–æ –∏ –æ–±—Ä–∞—Ç–∏—Ç–µ—Å—å –∫ –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏.
            {% endif %}

      - service: notify.zapgroup
        data:
          title: "{{ error_title }}"
          message: >
            {{ error_message }}

            –¢–µ–∫—É—â–∞—è –≤–ª–∞–∂–Ω–æ—Å—Ç—å: {{ states('sensor.sensor_zap_humidity') }}%
            –¶–µ–ª–µ–≤–∞—è –≤–ª–∞–∂–Ω–æ—Å—Ç—å: {{ states('sensor.adaptive_target_humidity') }}%

  # ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
  #  –í–û–°–°–¢–ê–ù–û–í–õ–ï–ù–ò–ï –ü–û–°–õ–ï RELOAD/RESTART
  # ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
  - id: "–í–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–µ –ø–æ—Å–ª–µ reload/restart"
    alias: humidity_reload_recovery
    description: "–ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞ –ø—Ä–∏ reload/restart –µ—Å–ª–∏ –∞–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü–∏—è –≤–∫–ª—é—á–µ–Ω–∞"
    mode: single

    trigger:
      # –ü—Ä–∏ reload automations
      - platform: event
        event_type: automation_reloaded
      # –ü—Ä–∏ HA restart
      - platform: homeassistant
        event: start

    condition:
      # –£—Å—Ç—Ä–æ–π—Å—Ç–≤–æ –Ω–µ –≥–æ—Ç–æ–≤–æ
      - condition: or
        conditions:
          - condition: state
            entity_id: switch.humidifier_puh_9105_puh_2709_power
            state: "off"
          - condition: template
            value_template: >
              {{ state_attr('humidifier.humidifier_puh_9105_puh_2709_humidifier', 'mode') != 'home' }}

    action:
      # –ó–∞–¥–µ—Ä–∂–∫–∞ —á—Ç–æ–±—ã –≤—Å–µ entities –∑–∞–≥—Ä—É–∑–∏–ª–∏—Å—å
      - delay:
          seconds: 5
      # –í–∫–ª—é—á–∏—Ç—å helper
      - service: input_boolean.turn_on
        target:
          entity_id: input_boolean.humidity_auto_enabled
      # –ü–æ–¥–æ–∂–¥–∞—Ç—å —á—Ç–æ–±—ã helper —Ç–æ—á–Ω–æ –≤–∫–ª—é—á–∏–ª—Å—è
      - delay:
          seconds: 1
      # –ó–∞–ø—É—Å—Ç–∏—Ç—å device setup
      - service: automation.trigger
        target:
          entity_id: automation.humidity_device_setup

# ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
#  üìã –ò–ù–°–¢–†–£–ö–¶–ò–ò –ü–û –ò–°–ü–û–õ–¨–ó–û–í–ê–ù–ò–Æ
# ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
#
#  1. –ü–ï–†–ï–ó–ê–ì–†–£–ó–ö–ê –ö–û–ù–§–ò–ì–£–†–ê–¶–ò–ò:
#     Developer Tools ‚Üí YAML ‚Üí "YAML configuration reloading"
#     ‚Üí Reload all YAML configuration
#
#  2. –ü–†–û–í–ï–†–ö–ê –†–ê–ë–û–¢–´:
#     Developer Tools ‚Üí States ‚Üí –Ω–∞–π—Ç–∏:
#     ‚Ä¢ sensor.adaptive_target_humidity - —Ü–µ–ª–µ–≤–∞—è –≤–ª–∞–∂–Ω–æ—Å—Ç—å (–∞–¥–∞–ø—Ç–∏–≤–Ω–∞—è)
#     ‚Ä¢ sensor.humidity_error - —Ç–µ–∫—É—â–µ–µ –æ—Ç–∫–ª–æ–Ω–µ–Ω–∏–µ
#     ‚Ä¢ sensor.recommended_intensity - —Ä–µ–∫–æ–º–µ–Ω–¥—É–µ–º–∞—è –º–æ—â–Ω–æ—Å—Ç—å
#
#  3. –£–ü–†–ê–í–õ–ï–ù–ò–ï:
#     Settings ‚Üí Devices & Services ‚Üí Helpers:
#     ‚Ä¢ input_boolean.humidity_auto_enabled - –≤–∫–ª/–≤—ã–∫–ª –∞–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü–∏—é
#       (–∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –≤—ã–∫–ª—é—á–∞–µ—Ç—Å—è –ø—Ä–∏ —Ä—É—á–Ω–æ–º —É–ø—Ä–∞–≤–ª–µ–Ω–∏–∏ —É–≤–ª–∞–∂–Ω–∏—Ç–µ–ª–µ–º)
#
#  4. –ú–û–ù–ò–¢–û–†–ò–ù–ì:
#     ‚Ä¢ sensor.sensor_zap_humidity - —Ç–µ–∫—É—â–∞—è –≤–ª–∞–∂–Ω–æ—Å—Ç—å –≤ –∫–æ–º–Ω–∞—Ç–µ
#     ‚Ä¢ sensor.sensor_zap_temperature - —Ç–µ–º–ø–µ—Ä–∞—Ç—É—Ä–∞ –≤ –∫–æ–º–Ω–∞—Ç–µ
#     ‚Ä¢ weather.forecast_home_assistant - —É–ª–∏—á–Ω–∞—è —Ç–µ–º–ø–µ—Ä–∞—Ç—É—Ä–∞ (Met.no)
#     ‚Ä¢ number.humidifier_puh_9105_puh_2709_intensity - –∏–Ω—Ç–µ–Ω—Å–∏–≤–Ω–æ—Å—Ç—å (0-7)
#
#  5. –ü–û–ù–ò–ú–ê–ù–ò–ï –ê–î–ê–ü–¢–ò–í–ù–û–ì–û –ê–õ–ì–û–†–ò–¢–ú–ê:
#     –§–æ—Ä–º—É–ª–∞ —É—á–∏—Ç—ã–≤–∞–µ—Ç –î–í–ê —Ñ–∞–∫—Ç–æ—Ä–∞:
#
#     A) –ö–æ–º–Ω–∞—Ç–Ω–∞—è —Ç–µ–º–ø–µ—Ä–∞—Ç—É—Ä–∞ (—Ç–µ–ø–ª–æ–≤–æ–π –∫–æ–º—Ñ–æ—Ä—Ç ISO 7730):
#        - 18¬∞C ‚Üí —Ü–µ–ª—å 52.5%
#        - 20¬∞C ‚Üí —Ü–µ–ª—å 50.0%
#        - 22¬∞C ‚Üí —Ü–µ–ª—å 47.5%
#        - 24¬∞C ‚Üí —Ü–µ–ª—å 45.0%
#        - 26¬∞C ‚Üí —Ü–µ–ª—å 42.5%
#
#     B) –£–ª–∏—á–Ω–∞—è —Ç–µ–º–ø–µ—Ä–∞—Ç—É—Ä–∞ (ASHRAE —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏):
#        - > +10¬∞C ‚Üí –º–∞–∫—Å 50%
#        - 0¬∞C ‚Üí –º–∞–∫—Å 40%
#        - -10¬∞C ‚Üí –º–∞–∫—Å 30%
#        - -20¬∞C ‚Üí –º–∞–∫—Å 20%
#
#     –§–∏–Ω–∞–ª—å–Ω–∞—è —Ü–µ–ª—å = min(A, B) –≤ –¥–∏–∞–ø–∞–∑–æ–Ω–µ 40-60% (–í–û–ó)
#
#  6. –ú–ï–¢–û–î –£–ü–†–ê–í–õ–ï–ù–ò–Ø (HYBRID):
#     ‚Ä¢ –ü—Ä–∏ error > 10% ‚Üí –∏–Ω—Ç–µ–Ω—Å–∏–≤–Ω–æ—Å—Ç—å 7 (–º–∞–∫—Å–∏–º—É–º)
#     ‚Ä¢ –ü—Ä–∏ error > 5% ‚Üí –∏–Ω—Ç–µ–Ω—Å–∏–≤–Ω–æ—Å—Ç—å 5
#     ‚Ä¢ –ü—Ä–∏ error > 2% ‚Üí –∏–Ω—Ç–µ–Ω—Å–∏–≤–Ω–æ—Å—Ç—å 3
#     ‚Ä¢ –ü—Ä–∏ error > 0.5% ‚Üí —Ç–µ–∫—É—â–∞—è + 1 (–ø–æ—Å—Ç–µ–ø–µ–Ω–Ω–æ)
#     ‚Ä¢ –ü—Ä–∏ error < -2% ‚Üí —Ç–µ–∫—É—â–∞—è - 1 (–ø–æ—Å—Ç–µ–ø–µ–Ω–Ω–æ)
#     ‚Ä¢ –ü—Ä–∏ |error| < 0.5% ‚Üí –Ω–µ –º–µ–Ω—è—Ç—å (–≥–∏—Å—Ç–µ—Ä–µ–∑–∏—Å)
#
# ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
